@using GruppAKonsult.Controllers
@model GruppAKonsult.ViewModels.EmployerFindViewModel
@{
    ViewBag.Title = "EmployerFind";
}

//JqueryKod som ska filtrera dropbox
<script src="~/Scripts/jquery-3.3.1.js"></script>
<script>

    $(document).ready(function () {
        var options = $("#DropDownList2").html();
        $("#DropDownList1").change(function (e) {
            var text = $("#DropDownList1 :selected").text();
            $("#DropDownList2").html(options);
            if (text == "All") return;
            $('#DropDownList2 :not([value^="' + text.substr(0, 3) + '"])').remove();

        });
</script>



@using (Html.BeginForm("EmployerFind", "Employer", FormMethod.Post))
{
    <div class="col-md-10">
        <br>
        <h3 class="card-header">Sök kandidat</h3><br />
        <div class="row">
            <div class="form-group col-md-2">
                <label class="control-label">Yrkesområde</label><br />
                <div>
                    @if (Model.ProfessionList != null)
                    {
                        @Html.DropDownListFor(m => m.SelectedProfession, Model.ProfessionList, new Dictionary<string, object> { { "class", "form-control" } })
                    }
                </div>
            </div>
            <br>
            <div class="form-group col-md-2">
                <label class="control-label">Kompetenser</label><br />
                <div>
                    @if (Model.SkillsList != null)
                    {
                        @Html.DropDownListFor(m => m.SelectedSkill, Model.SkillsList, new Dictionary<string, object> { { "class", "form-control" } })
                    }
                </div>
            </div>
            <br>
            <div class="form-group col-md-2">
                <label class="control-label">Språk</label><br />

                @if (Model.LanguageList != null)
                {
                    @Html.DropDownListFor(m => m.SelectedLanguage, Model.LanguageList, new Dictionary<string, object> { { "class", "form-control" } })
                }
            </div>
            <div class="form-group col-md-2">
                <label class="control-label">Stad</label><br />

                @if (Model.CityList != null)
                {
                    @Html.DropDownListFor(m => m.SelectedCity, Model.CityList, new Dictionary<string, object> { { "class", "form-control" } })
                }
            </div>
            <div class="form-group col-md-2">
                <br>
                <a>
                    <input type='submit' class="btn btn-primary btn-lg" value='SÖK' />
                </a>
            </div>
        </div>
    </div>
    <br>

    <div>
        <select ID="DropDownList1" Height="72px" Width="184px">
            <option Value="1">All</option>
            <option Value="2">Apples</option>
            <option Value="2">Orange</option>
            <option Value="3">Onion</option>
        </select>
        <br />
        <select ID="DropDownList2" Height="18px" Width="187px">
            <option Value="Apple_Style_1">Apple Style 1</option>
            <option Value="Apple_Style_2">Apple Style 2</option>
            <option Value="Apple_Style_3">Apple Style 3</option>
            <option Value="Orange_Style_1">Orange Style 1</option>
            <option Value="Orange_Style_2">Orange Style 2</option>
            <option Value="Orange_Style_3">Orange Style 3</option>
            <option Value="Orange_Style_4">Orange Style 4</option>
            <option Value="Onion_Style_1">Onion Style 1</option>
            <option Value="Onion_Style_2">Onion Style 2</option>
        </select>
    </div>



    @*<div class="row">
            <div class="col-4">

                <div class="form-group">
                    <label class="control-label">City</label>
                    <div>
                        @if (Model.CityList != null)
                        {
                            @Html.DropDownListFor(m => m.SelectedCity, Model.CityList, new Dictionary<string, object> {{"class", "form-control"}})
                        }
                    </div>
                </div>
            </div>




        </div>*@




    @*<div class="col-md-1">

            <br/><br/>
            <a>
                <input type='submit' class="btn btn-primary btn-lg" value='SÖK'/>
            </a>
        </div>*@

    <div class="row">
        <div class="col-md-10">
            <h3 class="card-header">Resultat</h3>
            <div class="card-body">
                <table class="table">
                    <tr>
                        <th>
                            <h5 class="card-title">Förnamn</h5>
                        </th>
                        <th>
                            <h5 class="card-title">Efternamn</h5>
                        </th>
                        <th>
                            <h5 class="card-title">Yrke</h5>
                        </th>
                        <th>
                            <h5 class="card-title">Kompetens</h5>
                        </th>
                        <th>
                            <h5 class="card-title">Språk</h5>
                        </th>
                        <th>
                            <h5 class="card-title">Stad</h5>
                        </th>
                        <th></th>
                    </tr>


                    @if (Model.SearchResults != null && Model.SearchResults.Any())
                    {
                        foreach (var item in Model.SearchResults)
                        {
                            <tr>
                                <td>
                                    @item.Firstname
                                </td>
                                <td>
                                    @item.Lastname
                                </td>
                                <td>
                                    @item.Professions
                                </td>
                                <td>
                                    @item.Skills
                                </td>
                                <td>
                                    @item.Languages
                                </td>
                                <td>@Html.ActionLink("Visa Profil", "ShowCV", "Employer", new { id = item.Candidate_Id }, new { @class = "btn btn-sm btn-primary" })</td>
                                <th></th>
                            </tr>
                        }
                    }
                </table>
            </div>
        </div>
    </div>

}



